% SPDX-FileCopyrightText: Copyright (C) Nile Jocson <atraphaxia@gmail.com>
% SPDX-License-Identifier: MPL-2.0



\usepackage{adjustbox}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{circuitikz}
\usepackage[upright = true]{derivative}
\usepackage[a4paper, margin = 2cm]{geometry}
\usepackage{interval}
\usepackage{mathtools}
\usepackage{physics2}
\usepackage{polynom}
\usepackage{siunitx}
\usepackage{tabularray}
\usepackage{tkz-tab}
\usepackage{varwidth}
\usepackage{xcolor}
\usepackage{xparse}
\usepackage{xpatch}

\usepackage{pst-eucl}

\usepackage{hyperref}
\usepackage[noabbrev]{cleveref}



\crefname{note}{note}{notes}

\ctikzset{american}

\derivset{\odv}[style-frac = \dfrac]

\intervalconfig{soft open fences}

\sisetup{per-mode = fraction}

\theoremstyle{definition}
\newtheorem{note}{Note}[subsection]

\usephysicsmodule{ab}

\UseTblrLibrary{amsmath}



\everymath{\displaystyle}

\setcounter{section}{-1}

\xpatchcmd{\tkzTabLine}{$0$}{${\color{white}\bullet}\mathllap{\circ}$}{}{}



\DeclareMathOperator{\adom}{dom}

\DeclarePairedDelimiter{\aabs}{\lvert}{\rvert}
\DeclarePairedDelimiter{\afloor}{\lfloor}{\rfloor}




\NewDocumentCommand{\aboilerplate}{mmmmm}{%
	\title{#1\\{\large{}From #2 --- #3}}
	\author{#4 \textless{}#5\textgreater{}}
	\maketitle{}
	\pagebreak{}
	\tableofcontents{}
	\pagebreak{}%
}

\NewDocumentCommand{\anotegroup}{mm}{%
	\subsection{#1}
		#2
	\pagebreak{}%
}

\NewDocumentCommand{\anote}{mmm}{%
	\begin{note}
		\textbf{#1.} #3 \label{note:#2}
	\end{note}%
}

\ExplSyntaxOn
\NewDocumentCommand{\aref}{sm}{%
	\IfBooleanTF{#1}{%
		\Cref{note:\clist_use:nn{#2}{,note:}}%
	}{%
		\cref{note:\clist_use:nn{#2}{,note:}}%
	}%
}
\ExplSyntaxOff

\NewDocumentCommand{\aproblem}{mm}{%
	#1
	\begin{align*}
		#2
	\end{align*}
	\pagebreak{}%
}

\NewDocumentCommand{\asecases}{O{}m}{%
	#1\begin{+cases}
		#2
	\end{+cases}%
}



\NewDocumentCommand{\ascases}{O{}m}{%
	\[\asecases[#1]{#2}\]%
}

\NewDocumentCommand{\assynth}{mm}{%
	\begin{center}
		\polyhornerscheme[#1]{#2}
	\end{center}%
}

\NewDocumentCommand{\asdraw}{O{1}m}{%
	\begin{center}\begin{adjustbox}{max width = #1\linewidth}\begin{tikzpicture}
		#2
	\end{tikzpicture}\end{adjustbox}\end{center}%
}

\NewDocumentCommand{\assigns}{O{1}mm}{%
	\begin{center}\begin{adjustbox}{max width = #1\linewidth}\begin{tikzpicture}
		\tkzTabInit[lgt = #2, espcl = 1, deltacl = 0, nocadre]
		#3
	\end{tikzpicture}\end{adjustbox}\end{center}%
}

\NewDocumentCommand{\ascircuit}{O{1}m}{%
	\begin{center}\begin{adjustbox}{max width = #1\linewidth}\begin{circuitikz}
		#2
	\end{circuitikz}\end{adjustbox}\end{center}%
}

\NewDocumentCommand{\asplot}{O{1}mmmmmmm}{%
	\begin{center}\begin{adjustbox}{max width = #1\linewidth}\begin{pspicture*}(#2, #3)(\fpeval{#4 + 0.4}, \fpeval{#5 + 0.4})
		\psaxes[showorigin = false]{<->}(0, 0)(#2, #3)(#4, #5)[#6, 0][#7, 90]
		#8
	\end{pspicture*}\end{adjustbox}\end{center}%
}

\NewDocumentCommand{\asfinal}{m}{%
	\begin{center}\fbox{\begin{varwidth}[c]{\linewidth}
		#1
	\end{varwidth}}\end{center}%
}



\NewDocumentCommand{\acases}{O{}m}{%
	\intertext{\ascases[#1]{#2}}%
}

\NewDocumentCommand{\asynth}{mm}{%
	\intertext{\assynth{#1}{#2}}%
}

\NewDocumentCommand{\adraw}{O{1}m}{%
	\intertext{\asdraw[#1]{#2}}%
}

\NewDocumentCommand{\asigns}{O{1}mm}{%
	\intertext{\assigns[#1]{#2}{#3}}%
}

\NewDocumentCommand{\acircuit}{O{1}m}{%
	\intertext{\ascircuit[#1]{#2}}%
}

\NewDocumentCommand{\aplot}{O{1}mmmmmmm}{%
	\intertext{\asplot[#1]{#2}{#3}{#4}{#5}{#6}{#7}{#8}}%
}

\NewDocumentCommand{\afinal}{m}{%
	\intertext{\asfinal{#1}}%
}
